<div class="container registerlogin-container">
    <div class="row mt-3">
        <h2>Login</h2>
        <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

          <!-- Email Field -->
          <div class="mb-3 position-relative">
            <label for="email" class="form-label">Email address</label>
            <input
              type="email"
              id="email"
              class="form-control"
              formControlName="email"
              [ngClass]="{
                'is-invalid':
                  loginForm.get('email')?.touched &&
                  loginForm.get('email')?.invalid
              }"
            />
            <div
              *ngIf="
                loginForm.get('email')?.touched &&
                loginForm.get('email')?.invalid
              "
              class="invalid-feedback"
            >
              <ng-container *ngIf="backendErrors['email']; else defaultEmailErr">
                {{ backendErrors['email'] }}
              </ng-container>
              <ng-template #defaultEmailErr>
                <div *ngIf="loginForm.get('email')?.errors?.['required']">
                  Email is required.
                </div>
                <div *ngIf="loginForm.get('email')?.errors?.['email']">
                  Email must be valid.
                </div>
              </ng-template>
            </div>
          </div>
  
          <!-- Password Field -->
          <div class="mb-3 position-relative">
            <label for="password" class="form-label">Password</label>
            <input
              type="password"
              id="password"
              class="form-control"
              formControlName="password"
              [ngClass]="{
                'is-invalid':
                  loginForm.get('password')?.touched &&
                  loginForm.get('password')?.invalid
              }"
            />
            
            <div
              *ngIf="
                loginForm.get('password')?.touched &&
                loginForm.get('password')?.invalid
              "
              class="invalid-feedback d-block"
            >
              <ng-container *ngIf="backendErrors['email']; else defaultEmailErr">
                {{ backendErrors['password'] }}
              </ng-container>
              <ng-template #defaultEmailErr>
                <div *ngIf="loginForm.get('password')?.errors?.['required']">
                  Password is required.
                </div>
              </ng-template>
            </div>
          </div>
          <div *ngIf="backendErrors['general']" class="invalid-feedback d-block mt-3">
              {{ backendErrors['general'] }}
          </div>
  
          <button type="submit" class="btn btn-primary w-100" [disabled]="loginForm.invalid">
            Log in
          </button>
        </form>
    </div>
  </div>
  <div class="mt-3 text-center">
    Dont have an account yet? <a routerLink="/register">Register</a>
  </div>